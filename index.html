<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=Ã¹, initial-scale=1.0"/>
  <title>Game Of Life Vanilla JS</title>
  <style>
    .cell {
      width: 8px;
      height: 8px;
      border: 1px;
    }

    .filled {
      background-color: black;
    }

    .empty {
      background-color: white;
    }
  </style>
</head>
<body>
  <table id="field" style="border: 1px solid black;"></table>
  <script>
    var size = 8;
    var htmlElements;
    var cells;
    var EMPTY = 0;
    var ALIVE = 1;

      function createField() {
        htmlElements = [];
        cells = [];
        var table = document.getElementById('field');
        for (var y = 0; y < size; y++) {
          //Creating the Y rows of the table based on the ySize variable (now we are using a size that is equal for both the x-axis and the y-axis)
          var tr = document.createElementById('tr');
          table.appendChild(tr);
          //Creating the htmlTable array by starting with the y-axis (rows)
          var rowElements = [];
          htmlElements.push(rowElements);
          //it creates the cells array that will be used to define wheter a cell is empty or not. We have to specify the xSize variable in the "new Array(xSize).fill('empty')"
          cells.push(new Array(size).fill(EMPTY));
          for (var x = 0; x < size; x++) {
            //append a td element (cell) to each row in the parent loop based on the xSize
            var td = document.createElement('td');
            tr.appendChild(td)
            //it pushes a td element at each child loop in each row created in the parent loop 
            rowElements.push(td);
          }
        }
      }

      function draw() {
        for (var y = 0; y < size; y++) {
          for (var x = 0; x < size; x++) {
            htmlElements[y][x].setAttribute('class', 'cell'+(cells[y][x] == 1 ? 'filled' : 'empty'))
          }
        }
      }
      
      function countNeighbours(x, y) {
        //We have passed as the function arguments the cell coordinates
        var count = 0;
        for (dy = -1; dy <= 1; dy++) {
          for (dx = -1; dx <= 1; dx++) {
            var nx = (x + dx + size) % size, ny = (y + dy + size) % size;
            count = count + cells[ny][nx];
          }
        }
        return count - cells[y][x];
      }

      function newGeneration() {
        var newCells = [];
        for (var i=0; i < size; i++) {
          newCells.push(new Array(size).fill(EMPTY));
        }
        for (var y = 0; y < size; y++) {
          for (var x = 0; x < size; x++) {
            var neighBours = countNeighbours(x, y);
            if (cells[y][x] == EMPTY && neighBours == 3) {
              newCells[y][x] = ALIVE;
            }

            if (cells[y][x] == ALIVE && (neighBours == 2 || neighBours == 3)) {
              newCells[y][x] = ALIVE;
            }
          }
        }
        cells = newCells;
      }

      function init() {
        createField();
        // the condition in the for loop sets that 30% (0.3) of the total cells must be alive 
        for (var i = 0; i < Math.floor(size * size * 0.3); i++) {
          //we are going to define the var x, y that will be used in the "do...while" loop to radomically set wich cell must be filled
          var x, y;
          do {
            // It generates a random integer between 0 and less than the xSize or the ySize to determenine the y and x index of the cells array 
            x = Math.floor(Math.random() * size), y = Math.floor(Math.random() * size);
            //the condition verifies whether the cell is empty or not and then it fills it based on the true evaluation. Afterwards, it breaks the do..while loop because the cell has been filled. The whole algorithm of the init() function generates a total amount of filled cells equal to the 30% of the total amount of cells
            if (cells[y][x] == EMPTY) {
              cells[y][x] = ALIVE;
              break;
            }
          } while (true);
        } 
        draw()
      }

      init();
  </script>
</body>
</html>